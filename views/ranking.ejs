<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RANKING <%= game %></title>
    <link rel="stylesheet" href="/CSS/arcade-style.css">
    <style>
        /* Clases auxiliares para evitar errores de logica en el HTML */
        .fila-ranking { display: flex; justify-content: space-between; padding: 15px 0; border-bottom: 1px solid #333; }
        .top-1 { color: #ffd700; text-shadow: 0 0 10px #ffd700; }
        .top-2 { color: #c0c0c0; }
        .top-3 { color: #cd7f32; }
        .top-normal { color: #e0e0e0; }
    </style>
</head>
<body style="display: flex; flex-direction: column; min-height: 100vh;">

<header>
    <h1>TOP 10 <%= game %></h1>
</header>

<main style="flex-direction: column; align-items: center; flex-grow: 1; padding: 20px;">
    
    <div style="background: rgba(0,0,0,0.8); padding: 30px; border: 3px solid var(--neon-purple); border-radius: 10px; width: 95%; max-width: 600px; box-shadow: 0 0 20px var(--neon-purple);">
        
        <div style="display: flex; justify-content: space-between; color: var(--neon-cyan); border-bottom: 2px solid var(--neon-cyan); padding-bottom: 15px; margin-bottom: 10px;">
            <span style="width: 20%; text-align: left;">POS</span>
            <span style="width: 50%; text-align: center;">JUGADOR</span>
            <span style="width: 30%; text-align: right;">PUNTOS</span>
        </div>

        <% if (results && results.length > 0) { %>
            <% results.forEach((row, i) => { 
                /* Determinamos la clase segun la posicion */
                let clasePosicion = "top-normal";
                if (i === 0) clasePosicion = "top-1";
                else if (i === 1) clasePosicion = "top-2";
                else if (i === 2) clasePosicion = "top-3";
            %>
                <div class="fila-ranking <%= clasePosicion %>">
                    <span style="width: 20%; text-align: left;">#<%= i + 1 %></span>
                    <span style="width: 50%; text-align: center;"><%= row.username.toUpperCase() %></span>
                    <span style="width: 30%; text-align: right;"><%= row.score %></span>
                </div>
            <% }) %>
        <% } else { %>
            <div style="padding: 40px; color: var(--neon-pink);">
                SIN PUNTUACIONES TODAVIA
            </div>
        <% } %>

    </div>

    <div style="margin-top: 50px; margin-bottom: 50px;">
        <a class="boton-jugar" href="/" style="text-decoration: none;">VOLVER AL INICIO</a>
    </div>

</main>

<footer>
    <p>SISTEMA DE RANKING ARCADE 2025</p>
</footer>

</body>
</html>